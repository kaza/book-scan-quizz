{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>Question</h1>
    <p>{{ question.question_text }}</p>

    <div id="audioRecorder">
        <button id="recordButton" class="btn btn-primary">Record Answer</button>
        <div id="recordingStatus" style="display: none;">Recording... <span id="recordingTime">0</span>s</div>
    </div>

    <div id="audioPlayback" style="display: none;">
        <audio id="audioPlayer" controls></audio>
        <button id="submitButton" class="btn btn-success">Submit Answer</button>
    </div>

    <div id="transcription" style="display: none;">
        <h3>Transcription:</h3>
        <p id="transcriptionText"></p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/audio_recording.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initAudioRecording('{{ url_for("prep_session.answer_question", session_id=session_id) }}');
    });
</script>
{% endblock %}